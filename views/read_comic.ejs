<%- include('./layouts/head.ejs') %>
<link rel="stylesheet" href="/css/chapter.css">
</head>
<body>

  <%- include('./layouts/navbar.ejs') %>
  </nav>

  <main>
    <!-- Chapter Header -->
    <section class="chapter-header">
      <div class="container text-center">
        <h1><%= comicId %></h1>
        <h2>Chapter <%= chapter %></h2>

        <!-- Mode Switch Buttons -->
        <div class="my-3">
          <button id="scrollModeBtn" class="btn btn-outline-primary btn-sm active">อ่านแบบเลื่อน</button>
          <button id="carouselModeBtn" class="btn btn-outline-secondary btn-sm">อ่านแบบทีละหน้า</button>
        </div>
      </div>
    </section>

    <!-- Scroll Mode (default) -->
    <section id="scrollMode" class="chapter-read">
      <div class="container w-50">
        <% images.forEach(img => { %>
          <div class="comic-page mb-3">
            <img src="<%= img %>" alt="Comic Page" style="max-width:100%;">
          </div>
        <% }) %>
      </div>
    </section>

    <!-- Carousel Mode (hidden by default) -->
    <section id="carouselMode" class="chapter-read my-4 d-none">
      <div class="container w-50">
        <div id="comicCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <% images.forEach((img, index) => { %>
              <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                <img src="<%= img %>" class="d-block w-100" alt="Comic Page">
              </div>
            <% }) %>
          </div>

          <!-- Carousel Controls -->
          <button class="carousel-control-prev" type="button" data-bs-target="#comicCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#comicCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Back Button -->
    <div class="container my-3 text-center">
      <a href="/comic/<%= comicId %>" class="btn btn-secondary">⬅ กลับไปหน้ารวมตอน</a>
    </div>
  </main>

  <%- include('./layouts/footer.ejs') %>
  </footer>

  <!-- Scripts -->
  <%- include('./layouts/script.ejs') %>
</body>
</html>
